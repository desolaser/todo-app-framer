import type { NextPage } from 'next';
import Head from 'next/head';
import { Box, HStack } from '@chakra-ui/react';
import AddTaskForm from '../components/AddTaskForm';
import Layout from '../components/Layout';
import { useAppSelector } from '../redux/hooks';
import ColumnDisplay from '../components/ColumnDisplay';
import Column from '../model/Column';
import Todo from '../model/Todo';

const Home: NextPage = () => {
  const { todos, columns, columnOrder } = useAppSelector(store => store.todo);

  return (
    <Layout>
      <Box>
        <Head>
          <title>Todo App Framer</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <AddTaskForm />
        <HStack align={"flex-start"}>
          {columnOrder.map((columnId: string) => {
            const column: Column = columns.filter(column => column.id == columnId)[0];
            const todosList: Todo[] = column.todoIds.map(todoId => todos.filter(todo => todo.id = todoId)[0] )

            return <ColumnDisplay column={column} todos={todosList} />
          })}
        </HStack>        
      </Box>
    </Layout>
  );
}

export default Home;